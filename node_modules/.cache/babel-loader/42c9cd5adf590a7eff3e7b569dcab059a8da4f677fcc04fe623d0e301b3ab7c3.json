{"ast":null,"code":"import { mapGetters, mapActions } from 'vuex';\nimport NavbarComponent from '@/components/common/NavbarComponent.vue';\nimport api from '@/services/api';\nexport default {\n  name: 'StudentsView',\n  components: {\n    NavbarComponent\n  },\n  data() {\n    return {\n      showForm: false,\n      editingStudent: null,\n      form: {\n        cui: '',\n        names: '',\n        status: true\n      }\n    };\n  },\n  computed: {\n    ...mapGetters(['students', 'loading', 'error'])\n  },\n  methods: {\n    ...mapActions(['fetchStudents']),\n    toggleForm() {\n      this.resetForm();\n      this.showForm = !this.showForm;\n    },\n    resetForm() {\n      this.editingStudent = null;\n      this.form = {\n        cui: '',\n        names: '',\n        status: true\n      };\n    },\n    async submitForm() {\n      try {\n        if (this.editingStudent) {\n          await api.updateStudent(this.editingStudent.id, this.form);\n        } else {\n          await api.createStudent(this.form);\n        }\n        this.fetchStudents();\n        this.showForm = false;\n        this.resetForm();\n      } catch (error) {\n        console.error('Error al guardar estudiante:', error);\n        alert('No se pudo guardar el estudiante');\n      }\n    },\n    editStudent(student) {\n      this.showForm = true;\n      this.editingStudent = student;\n      this.form = {\n        cui: student.cui,\n        names: student.names,\n        status: student.status\n      };\n    },\n    async deleteStudent(id) {\n      if (!confirm('¬øEst√°s seguro de eliminar este estudiante?')) return;\n      try {\n        await api.deleteStudent(id);\n        this.fetchStudents();\n      } catch (error) {\n        console.error('Error al eliminar estudiante:', error);\n      }\n    }\n  },\n  async created() {\n    await this.fetchStudents();\n  }\n};","map":{"version":3,"names":["mapGetters","mapActions","NavbarComponent","api","name","components","data","showForm","editingStudent","form","cui","names","status","computed","methods","toggleForm","resetForm","submitForm","updateStudent","id","createStudent","fetchStudents","error","console","alert","editStudent","student","deleteStudent","confirm","created"],"sources":["/Users/lvilcah/Downloads/CUNA-main/src/views/Students.vue"],"sourcesContent":["<template>\n  <div class=\"students-view\">\n    <navbar-component />\n\n    <div class=\"container mt-4\">\n      <div class=\"row\">\n        <div class=\"col-12 d-flex justify-content-between align-items-center\">\n          <h1>üë®‚Äçüéì Gesti√≥n de Estudiantes</h1>\n          <button class=\"btn btn-primary\" @click=\"toggleForm\">\n            {{ showForm ? 'Cancelar' : '‚ûï Agregar Estudiante' }}\n          </button>\n        </div>\n      </div>\n\n      <div v-if=\"showForm\" class=\"row mt-3\">\n        <div class=\"col-12\">\n          <div class=\"card border border-primary\">\n            <div class=\"card-body\">\n              <h5>{{ editingStudent ? 'Editar Estudiante' : 'Nuevo Estudiante' }}</h5>\n              <form @submit.prevent=\"submitForm\">\n                <div class=\"row\">\n                  <div class=\"col-md-4 mb-2\">\n                    <input v-model=\"form.cui\" type=\"text\" class=\"form-control\" placeholder=\"CUI\" required>\n                  </div>\n                  <div class=\"col-md-4 mb-2\">\n                    <input v-model=\"form.names\" type=\"text\" class=\"form-control\" placeholder=\"Nombres\" required>\n                  </div>\n                  <div class=\"col-md-4 mb-2\">\n                    <select v-model=\"form.status\" class=\"form-select\">\n                      <option :value=\"true\">Activo</option>\n                      <option :value=\"false\">Inactivo</option>\n                    </select>\n                  </div>\n                </div>\n                <button type=\"submit\" class=\"btn btn-success\">\n                  {{ editingStudent ? 'Actualizar' : 'Guardar' }}\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row mt-4\">\n        <div class=\"col-12\">\n          <div class=\"card\">\n            <div class=\"card-header d-flex justify-content-between align-items-center\">\n              <h5>üìã Lista de Estudiantes</h5>\n              <button class=\"btn btn-secondary\" @click=\"fetchStudents\">\n                üîÑ Actualizar\n              </button>\n            </div>\n            <div class=\"card-body\">\n              <div v-if=\"loading\" class=\"text-center\">\n                <div class=\"spinner-border\" role=\"status\">\n                  <span class=\"visually-hidden\">Cargando...</span>\n                </div>\n              </div>\n\n              <div v-else-if=\"error\" class=\"alert alert-danger\">\n                {{ error }}\n              </div>\n\n              <div v-else-if=\"students.length === 0\" class=\"text-center\">\n                <p>No hay estudiantes registrados</p>\n              </div>\n\n              <div v-else>\n                <div class=\"table-responsive\">\n                  <table class=\"table table-striped\">\n                    <thead>\n                      <tr>\n                        <th>ID</th>\n                        <th>CUI</th>\n                        <th>Nombre</th>\n                        <th>Estado</th>\n                        <th>Fecha Creaci√≥n</th>\n                        <th>Acciones</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr v-for=\"student in students\" :key=\"student.id\">\n                        <td>{{ student.id }}</td>\n                        <td>{{ student.cui }}</td>\n                        <td>{{ student.names }}</td>\n                        <td>\n                          <span :class=\"student.status ? 'badge bg-success' : 'badge bg-danger'\">\n                            {{ student.status ? 'Activo' : 'Inactivo' }}\n                          </span>\n                        </td>\n                        <td>{{ new Date(student.created).toLocaleDateString() }}</td>\n                        <td>\n                          <button class=\"btn btn-sm btn-warning me-2\" @click=\"editStudent(student)\">‚úèÔ∏è</button>\n                          <button class=\"btn btn-sm btn-danger\" @click=\"deleteStudent(student.id)\">üóëÔ∏è</button>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport NavbarComponent from '@/components/common/NavbarComponent.vue'\nimport api from '@/services/api'\n\nexport default {\n  name: 'StudentsView',\n  components: {\n    NavbarComponent\n  },\n  data() {\n    return {\n      showForm: false,\n      editingStudent: null,\n      form: {\n        cui: '',\n        names: '',\n        status: true\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(['students', 'loading', 'error'])\n  },\n  methods: {\n    ...mapActions(['fetchStudents']),\n\n    toggleForm() {\n      this.resetForm()\n      this.showForm = !this.showForm\n    },\n\n    resetForm() {\n      this.editingStudent = null\n      this.form = { cui: '', names: '', status: true }\n    },\n\n    async submitForm() {\n      try {\n        if (this.editingStudent) {\n          await api.updateStudent(this.editingStudent.id, this.form)\n        } else {\n          await api.createStudent(this.form)\n        }\n        this.fetchStudents()\n        this.showForm = false\n        this.resetForm()\n      } catch (error) {\n        console.error('Error al guardar estudiante:', error)\n        alert('No se pudo guardar el estudiante')\n      }\n    },\n\n    editStudent(student) {\n      this.showForm = true\n      this.editingStudent = student\n      this.form = {\n        cui: student.cui,\n        names: student.names,\n        status: student.status\n      }\n    },\n\n    async deleteStudent(id) {\n      if (!confirm('¬øEst√°s seguro de eliminar este estudiante?')) return\n      try {\n        await api.deleteStudent(id)\n        this.fetchStudents()\n      } catch (error) {\n        console.error('Error al eliminar estudiante:', error)\n      }\n    }\n  },\n  async created() {\n    await this.fetchStudents()\n  }\n}\n</script>\n\n<style scoped>\n.table th,\n.table td {\n  vertical-align: middle;\n}\n</style>"],"mappings":"AA8GA,SAASA,UAAU,EAAEC,UAAS,QAAS,MAAK;AAC5C,OAAOC,eAAc,MAAO,yCAAwC;AACpE,OAAOC,GAAE,MAAO,gBAAe;AAE/B,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,UAAU,EAAE;IACVH;EACF,CAAC;EACDI,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,KAAK;MACfC,cAAc,EAAE,IAAI;MACpBC,IAAI,EAAE;QACJC,GAAG,EAAE,EAAE;QACPC,KAAK,EAAE,EAAE;QACTC,MAAM,EAAE;MACV;IACF;EACF,CAAC;EACDC,QAAQ,EAAE;IACR,GAAGb,UAAU,CAAC,CAAC,UAAU,EAAE,SAAS,EAAE,OAAO,CAAC;EAChD,CAAC;EACDc,OAAO,EAAE;IACP,GAAGb,UAAU,CAAC,CAAC,eAAe,CAAC,CAAC;IAEhCc,UAAUA,CAAA,EAAG;MACX,IAAI,CAACC,SAAS,CAAC;MACf,IAAI,CAACT,QAAO,GAAI,CAAC,IAAI,CAACA,QAAO;IAC/B,CAAC;IAEDS,SAASA,CAAA,EAAG;MACV,IAAI,CAACR,cAAa,GAAI,IAAG;MACzB,IAAI,CAACC,IAAG,GAAI;QAAEC,GAAG,EAAE,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,MAAM,EAAE;MAAK;IACjD,CAAC;IAED,MAAMK,UAAUA,CAAA,EAAG;MACjB,IAAI;QACF,IAAI,IAAI,CAACT,cAAc,EAAE;UACvB,MAAML,GAAG,CAACe,aAAa,CAAC,IAAI,CAACV,cAAc,CAACW,EAAE,EAAE,IAAI,CAACV,IAAI;QAC3D,OAAO;UACL,MAAMN,GAAG,CAACiB,aAAa,CAAC,IAAI,CAACX,IAAI;QACnC;QACA,IAAI,CAACY,aAAa,CAAC;QACnB,IAAI,CAACd,QAAO,GAAI,KAAI;QACpB,IAAI,CAACS,SAAS,CAAC;MACjB,EAAE,OAAOM,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK;QACnDE,KAAK,CAAC,kCAAkC;MAC1C;IACF,CAAC;IAEDC,WAAWA,CAACC,OAAO,EAAE;MACnB,IAAI,CAACnB,QAAO,GAAI,IAAG;MACnB,IAAI,CAACC,cAAa,GAAIkB,OAAM;MAC5B,IAAI,CAACjB,IAAG,GAAI;QACVC,GAAG,EAAEgB,OAAO,CAAChB,GAAG;QAChBC,KAAK,EAAEe,OAAO,CAACf,KAAK;QACpBC,MAAM,EAAEc,OAAO,CAACd;MAClB;IACF,CAAC;IAED,MAAMe,aAAaA,CAACR,EAAE,EAAE;MACtB,IAAI,CAACS,OAAO,CAAC,4CAA4C,CAAC,EAAE;MAC5D,IAAI;QACF,MAAMzB,GAAG,CAACwB,aAAa,CAACR,EAAE;QAC1B,IAAI,CAACE,aAAa,CAAC;MACrB,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK;MACtD;IACF;EACF,CAAC;EACD,MAAMO,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACR,aAAa,CAAC;EAC3B;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}