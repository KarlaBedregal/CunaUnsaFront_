"use strict";(self["webpackChunkcuna_frontend"]=self["webpackChunkcuna_frontend"]||[]).push([[715],{715:function(t,e,s){s.r(e),s.d(e,{default:function(){return G}});var n=s(641),a=s(33),r=s(3751);const l={class:"students-view"},o={class:"container mt-4"},d={class:"row"},i={class:"col-12 d-flex justify-content-between align-items-center"},u={key:0,class:"row mt-3"},c={class:"col-12"},m={class:"card border border-primary"},k={class:"card-body"},h={class:"row"},L={class:"col-md-4 mb-2"},b={class:"col-md-4 mb-2"},v={class:"col-md-4 mb-2"},f={type:"submit",class:"btn btn-success"},g={class:"row mt-4"},p={class:"col-12"},y={class:"card"},w={class:"card-header d-flex justify-content-between align-items-center"},C={class:"card-body"},S={key:0,class:"text-center"},F={key:1,class:"alert alert-danger"},E={key:2,class:"text-center"},_={key:3},A={class:"table-responsive"},X={class:"table table-striped"},I=["onClick"],x=["onClick"];function N(t,e,s,N,U,D){const V=(0,n.g2)("navbar-component");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(V),(0,n.Lk)("div",o,[(0,n.Lk)("div",d,[(0,n.Lk)("div",i,[e[6]||(e[6]=(0,n.Lk)("h1",null,"👨‍🎓 Gestión de Estudiantes",-1)),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>D.toggleForm&&D.toggleForm(...t))},(0,a.v_)(U.showForm?"Cancelar":"➕ Agregar Estudiante"),1)])]),U.showForm?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",c,[(0,n.Lk)("div",m,[(0,n.Lk)("div",k,[(0,n.Lk)("h5",null,(0,a.v_)(U.editingStudent?"Editar Estudiante":"Nuevo Estudiante"),1),(0,n.Lk)("form",{onSubmit:e[4]||(e[4]=(0,r.D$)((...t)=>D.submitForm&&D.submitForm(...t),["prevent"]))},[(0,n.Lk)("div",h,[(0,n.Lk)("div",L,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>U.form.cui=t),type:"text",class:"form-control",placeholder:"CUI",required:""},null,512),[[r.Jo,U.form.cui]])]),(0,n.Lk)("div",b,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>U.form.names=t),type:"text",class:"form-control",placeholder:"Nombres",required:""},null,512),[[r.Jo,U.form.names]])]),(0,n.Lk)("div",v,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>U.form.status=t),class:"form-select"},e[7]||(e[7]=[(0,n.Lk)("option",{value:!0},"Activo",-1),(0,n.Lk)("option",{value:!1},"Inactivo",-1)]),512),[[r.u1,U.form.status]])])]),(0,n.Lk)("button",f,(0,a.v_)(U.editingStudent?"Actualizar":"Guardar"),1)],32)])])])])):(0,n.Q3)("",!0),(0,n.Lk)("div",g,[(0,n.Lk)("div",p,[(0,n.Lk)("div",y,[(0,n.Lk)("div",w,[e[8]||(e[8]=(0,n.Lk)("h5",null,"📋 Lista de Estudiantes",-1)),(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[5]||(e[5]=(...e)=>t.fetchStudents&&t.fetchStudents(...e))}," 🔄 Actualizar ")]),(0,n.Lk)("div",C,[t.loading?((0,n.uX)(),(0,n.CE)("div",S,e[9]||(e[9]=[(0,n.Lk)("div",{class:"spinner-border",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Cargando...")],-1)]))):t.error?((0,n.uX)(),(0,n.CE)("div",F,(0,a.v_)(t.error),1)):0===t.students.length?((0,n.uX)(),(0,n.CE)("div",E,e[10]||(e[10]=[(0,n.Lk)("p",null,"No hay estudiantes registrados",-1)]))):((0,n.uX)(),(0,n.CE)("div",_,[(0,n.Lk)("div",A,[(0,n.Lk)("table",X,[e[11]||(e[11]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"ID"),(0,n.Lk)("th",null,"CUI"),(0,n.Lk)("th",null,"Nombre"),(0,n.Lk)("th",null,"Estado"),(0,n.Lk)("th",null,"Fecha Creación"),(0,n.Lk)("th",null,"Acciones")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.students,t=>((0,n.uX)(),(0,n.CE)("tr",{key:t.id},[(0,n.Lk)("td",null,(0,a.v_)(t.id),1),(0,n.Lk)("td",null,(0,a.v_)(t.cui),1),(0,n.Lk)("td",null,(0,a.v_)(t.names),1),(0,n.Lk)("td",null,[(0,n.Lk)("span",{class:(0,a.C4)(t.status?"badge bg-success":"badge bg-danger")},(0,a.v_)(t.status?"Activo":"Inactivo"),3)]),(0,n.Lk)("td",null,(0,a.v_)(new Date(t.created).toLocaleDateString()),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-sm btn-warning me-2",onClick:e=>D.editStudent(t)},"✏️",8,I),(0,n.Lk)("button",{class:"btn btn-sm btn-danger",onClick:e=>D.deleteStudent(t.id)},"🗑️",8,x)])]))),128))])])])]))])])])])])])}var U=s(6278),D=s(2478),V=s(4300),j={name:"StudentsView",components:{NavbarComponent:D.A},data(){return{showForm:!1,editingStudent:null,form:{cui:"",names:"",status:!0}}},computed:{...(0,U.L8)(["students","loading","error"])},methods:{...(0,U.i0)(["fetchStudents"]),toggleForm(){this.resetForm(),this.showForm=!this.showForm},resetForm(){this.editingStudent=null,this.form={cui:"",names:"",status:!0}},async submitForm(){try{this.editingStudent?await V.A.updateStudent(this.editingStudent.id,this.form):await V.A.createStudent(this.form),this.fetchStudents(),this.showForm=!1,this.resetForm()}catch(t){console.error("Error al guardar estudiante:",t),alert("No se pudo guardar el estudiante")}},editStudent(t){this.showForm=!0,this.editingStudent=t,this.form={cui:t.cui,names:t.names,status:t.status}},async deleteStudent(t){if(confirm("¿Estás seguro de eliminar este estudiante?"))try{await V.A.deleteStudent(t),this.fetchStudents()}catch(e){console.error("Error al eliminar estudiante:",e)}}},async created(){await this.fetchStudents()}},q=s(6262);const z=(0,q.A)(j,[["render",N],["__scopeId","data-v-fbc7cc68"]]);var G=z}}]);
//# sourceMappingURL=715.765e3d68.js.map