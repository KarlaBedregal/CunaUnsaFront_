{"ast":null,"code":"import { createStore } from 'vuex';\nimport api from '@/services/api';\nimport '@fortawesome/fontawesome-free/css/all.min.css';\nexport default createStore({\n  state: {\n    user: JSON.parse(localStorage.getItem('user')) || null,\n    token: localStorage.getItem('token') || null,\n    isAuthenticated: !!localStorage.getItem('token'),\n    students: [],\n    teachers: [],\n    courses: [],\n    loading: false,\n    error: null\n  },\n  mutations: {\n    SET_USER(state, user) {\n      state.user = user;\n      state.isAuthenticated = !!user;\n    },\n    SET_TOKEN(state, token) {\n      state.token = token;\n      state.isAuthenticated = !!token;\n    },\n    SET_STUDENTS(state, students) {\n      state.students = students;\n    },\n    SET_TEACHERS(state, teachers) {\n      state.teachers = teachers;\n    },\n    SET_COURSES(state, courses) {\n      state.courses = courses;\n    },\n    SET_LOADING(state, loading) {\n      state.loading = loading;\n    },\n    SET_ERROR(state, error) {\n      state.error = error;\n    },\n    LOGOUT(state) {\n      state.user = null;\n      state.token = null;\n      state.isAuthenticated = false;\n    }\n  },\n  actions: {\n    async login({\n      commit\n    }, credentials) {\n      try {\n        commit('SET_LOADING', true);\n        const response = await api.login(credentials);\n        console.log(\"ðŸ” Login response:\", response);\n        const success = response?.data?.success;\n        const data = response?.data?.data;\n        if (success && data?.user && data?.token) {\n          const {\n            user,\n            token\n          } = data;\n          localStorage.setItem('token', token);\n          localStorage.setItem('user', JSON.stringify(user));\n          commit('SET_TOKEN', token);\n          commit('SET_USER', user);\n          commit('SET_ERROR', null);\n          return response.data;\n        } else {\n          const msg = response?.data?.message || 'Respuesta inesperada del servidor';\n          commit('SET_ERROR', msg);\n          throw new Error(msg);\n        }\n      } catch (error) {\n        console.error('âŒ Error en login:', error);\n        commit('SET_ERROR', error.response?.data?.message || 'Error de login');\n        throw error;\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async register({\n      commit\n    }, userData) {\n      try {\n        commit('SET_LOADING', true);\n        const response = await api.register(userData);\n        if (response.data.success) {\n          const {\n            user,\n            token\n          } = response.data.data;\n          localStorage.setItem('token', token);\n          localStorage.setItem('user', JSON.stringify(user));\n          commit('SET_TOKEN', token);\n          commit('SET_USER', user);\n          commit('SET_ERROR', null);\n          return response.data;\n        }\n      } catch (error) {\n        commit('SET_ERROR', error.response?.data?.message || 'Error de registro');\n        throw error;\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async logout({\n      commit\n    }) {\n      try {\n        await api.logout();\n      } catch (error) {\n        console.error('Error al cerrar sesiÃ³n:', error);\n      } finally {\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        commit('LOGOUT');\n      }\n    },\n    async fetchStudents({\n      commit\n    }) {\n      try {\n        commit('SET_LOADING', true);\n        const response = await api.getStudents();\n        commit('SET_STUDENTS', response.data.data);\n      } catch (error) {\n        commit('SET_ERROR', error.response?.data?.message || 'Error al cargar estudiantes');\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async fetchTeachers({\n      commit\n    }) {\n      try {\n        commit('SET_LOADING', true);\n        const response = await api.getTeachers();\n        // console.log('ðŸ§ª Docentes:', response.data)\n        commit('SET_TEACHERS', response.data.data);\n      } catch (error) {\n        // console.error('âŒ Error docentes:', error.response?.data || error)\n        commit('SET_ERROR', 'Error al cargar docentes');\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async fetchCourses({\n      commit\n    }) {\n      try {\n        commit('SET_LOADING', true);\n        const response = await api.getCourses();\n        // console.log('ðŸ§ª Cursos:', response.data)\n        commit('SET_COURSES', response.data.data);\n      } catch (error) {\n        // console.error('âŒ Error cursos:', error.response?.data || error)\n        commit('SET_ERROR', 'Error al cargar cursos');\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    }\n  },\n  getters: {\n    isAuthenticated: state => state.isAuthenticated,\n    currentUser: state => state.user,\n    students: state => state.students,\n    teachers: state => state.teachers,\n    courses: state => state.courses,\n    loading: state => state.loading,\n    error: state => state.error\n  }\n});","map":{"version":3,"names":["createStore","api","state","user","JSON","parse","localStorage","getItem","token","isAuthenticated","students","teachers","courses","loading","error","mutations","SET_USER","SET_TOKEN","SET_STUDENTS","SET_TEACHERS","SET_COURSES","SET_LOADING","SET_ERROR","LOGOUT","actions","login","commit","credentials","response","console","log","success","data","setItem","stringify","msg","message","Error","register","userData","logout","removeItem","fetchStudents","getStudents","fetchTeachers","getTeachers","fetchCourses","getCourses","getters","currentUser"],"sources":["D:/ANuevo1/CunaFrontend/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\nimport api from '@/services/api'\nimport '@fortawesome/fontawesome-free/css/all.min.css'\n\nexport default createStore({\n  state: {\n    user: JSON.parse(localStorage.getItem('user')) || null,\n    token: localStorage.getItem('token') || null,\n    isAuthenticated: !!localStorage.getItem('token'),\n    students: [],\n    teachers: [],\n    courses: [],\n    loading: false,\n    error: null\n  },\n\n  mutations: {\n    SET_USER(state, user) {\n      state.user = user\n      state.isAuthenticated = !!user\n    },\n    SET_TOKEN(state, token) {\n      state.token = token\n      state.isAuthenticated = !!token\n    },\n    SET_STUDENTS(state, students) {\n      state.students = students\n    },\n    SET_TEACHERS(state, teachers) {\n      state.teachers = teachers\n    },\n    SET_COURSES(state, courses) {\n      state.courses = courses\n    },\n    SET_LOADING(state, loading) {\n      state.loading = loading\n    },\n    SET_ERROR(state, error) {\n      state.error = error\n    },\n    LOGOUT(state) {\n      state.user = null\n      state.token = null\n      state.isAuthenticated = false\n    }\n  },\n\n  actions: {\n    async login({ commit }, credentials) {\n      try {\n        commit('SET_LOADING', true);\n\n        const response = await api.login(credentials);\n        console.log(\"ðŸ” Login response:\", response);\n\n        const success = response?.data?.success;\n        const data = response?.data?.data;\n\n        if (success && data?.user && data?.token) {\n          const { user, token } = data;\n\n          localStorage.setItem('token', token);\n          localStorage.setItem('user', JSON.stringify(user));\n\n          commit('SET_TOKEN', token);\n          commit('SET_USER', user);\n          commit('SET_ERROR', null);\n\n          return response.data;\n        } else {\n          const msg = response?.data?.message || 'Respuesta inesperada del servidor';\n          commit('SET_ERROR', msg);\n          throw new Error(msg);\n        }\n\n      } catch (error) {\n        console.error('âŒ Error en login:', error);\n        commit('SET_ERROR', error.response?.data?.message || 'Error de login');\n        throw error;\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async register({ commit }, userData) {\n      try {\n        commit('SET_LOADING', true)\n        const response = await api.register(userData)\n\n        if (response.data.success) {\n          const { user, token } = response.data.data\n\n          localStorage.setItem('token', token)\n          localStorage.setItem('user', JSON.stringify(user))\n\n          commit('SET_TOKEN', token)\n          commit('SET_USER', user)\n          commit('SET_ERROR', null)\n\n          return response.data\n        }\n      } catch (error) {\n        commit('SET_ERROR', error.response?.data?.message || 'Error de registro')\n        throw error\n      } finally {\n        commit('SET_LOADING', false)\n      }\n    },\n\n    async logout({ commit }) {\n      try {\n        await api.logout()\n      } catch (error) {\n        console.error('Error al cerrar sesiÃ³n:', error)\n      } finally {\n        localStorage.removeItem('token')\n        localStorage.removeItem('user')\n        commit('LOGOUT')\n      }\n    },\n\n    async fetchStudents({ commit }) {\n      try {\n        commit('SET_LOADING', true)\n        const response = await api.getStudents()\n        commit('SET_STUDENTS', response.data.data)\n      } catch (error) {\n        commit('SET_ERROR', error.response?.data?.message || 'Error al cargar estudiantes')\n      } finally {\n        commit('SET_LOADING', false)\n      }\n    },\n\n    async fetchTeachers({ commit }) {\n      try {\n        commit('SET_LOADING', true)\n        const response = await api.getTeachers()\n        // console.log('ðŸ§ª Docentes:', response.data)\n        commit('SET_TEACHERS', response.data.data)\n      } catch (error) {\n        // console.error('âŒ Error docentes:', error.response?.data || error)\n        commit('SET_ERROR', 'Error al cargar docentes')\n      } finally {\n        commit('SET_LOADING', false)\n      }\n    },\n\n    async fetchCourses({ commit }) {\n      try {\n        commit('SET_LOADING', true)\n        const response = await api.getCourses()\n        // console.log('ðŸ§ª Cursos:', response.data)\n        commit('SET_COURSES', response.data.data)\n      } catch (error) {\n        // console.error('âŒ Error cursos:', error.response?.data || error)\n        commit('SET_ERROR', 'Error al cargar cursos')\n      } finally {\n        commit('SET_LOADING', false)\n      }\n    }\n  },\n\n  getters: {\n    isAuthenticated: state => state.isAuthenticated,\n    currentUser: state => state.user,\n    students: state => state.students,\n    teachers: state => state.teachers,\n    courses: state => state.courses,\n    loading: state => state.loading,\n    error: state => state.error\n  }\n})\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}